# 上传激活码功能使用说明

## 📱 功能概述

Android版发货助手支持用户自定义激活码文件，无需依赖预设的激活码文件。用户可以从手机存储中选择任意TXT文件作为激活码源。

## 🔄 操作流程

### 1. 点击"上传激活码"按钮
- 应用主界面有8个按钮，其中"上传激活码"按钮用于管理激活码文件

### 2. 选择激活码类型
点击后会弹出4个选项：
- **1天激活码** - 用于散装模式
- **30天激活码** - 用于30天按钮
- **90天激活码** - 用于90天按钮
- **365天激活码** - 用于365天按钮

### 3. 文件浏览器界面

#### **路径导航功能**：
- **↑ 上级** - 返回上级目录
- **根目录** - 快速跳转到手机存储根目录 (`/storage/emulated/0`)
- **下载** - 快速跳转到下载文件夹
- **文档** - 快速跳转到文档文件夹

#### **路径显示**：
- 实时显示当前浏览路径
- 选中文件时显示文件名

#### **文件过滤**：
- 只显示 `.txt` 文本文件
- 隐藏系统隐藏文件

### 4. 选择文件
- 点击要使用的TXT文件
- 点击"选择此文件"按钮确认
- 或点击"取消"返回

### 5. 文件验证
应用会自动验证选择的文件：
- **格式检查**：确保是TXT文件
- **内容验证**：提取有效激活码（8位以上字母数字）
- **数量检查**：建议至少包含5个有效激活码

### 6. 保存配置
验证成功后：
- 文件路径保存到应用配置
- 显示成功消息和激活码数量
- 后续使用该类型激活码时优先从此文件读取

## 📂 文件要求

### **文件格式**
```
文件名: 任意名称.txt
编码: UTF-8
大小: 建议小于1MB
```

### **内容格式**
```
# 注释行（以#开头，会被忽略）
ABC123DEF4
XYZ789GHI0  
JKL456MNO1
...
```

### **激活码要求**
- **长度**：至少8个字符
- **字符集**：只能包含字母和数字
- **格式**：每行一个激活码
- **数量**：建议至少5个

## 🗂️ Android存储路径说明

### **常用存储位置**：
```
/storage/emulated/0/          # 手机内部存储根目录
├── Download/                 # 下载文件夹
├── Documents/                # 文档文件夹  
├── DCIM/                     # 相机照片
├── Music/                    # 音乐文件
├── Pictures/                 # 图片文件
└── Android/                  # 应用数据
```

### **推荐存放位置**：
- **Download** - 从网络下载的激活码文件
- **Documents** - 自己创建的激活码文件
- **根目录** - 直接放在存储根目录

## ⚙️ 配置管理

### **配置文件位置**
```
应用数据目录/code_paths.json
```

### **配置文件格式**
```json
{
  "1": "/storage/emulated/0/Download/1day_codes.txt",
  "30": "/storage/emulated/0/Documents/30day_codes.txt",
  "90": null,
  "365": "/storage/emulated/0/365day_codes.txt"
}
```

### **优先级规则**
1. **用户上传文件** - 优先使用
2. **默认文件** - 回退选项（如果上传文件不存在）

## 🔧 故障排除

### **常见问题**

#### 1. **找不到文件**
- 确认文件确实存在于选择的路径
- 检查文件是否被移动或删除
- 重新上传文件

#### 2. **激活码无效**
- 检查文件编码是否为UTF-8
- 确认激活码格式正确（8位以上字母数字）
- 移除文件中的特殊字符和空格

#### 3. **权限问题**
- 确认应用有存储访问权限
- 尝试将文件放到公共目录（如Download）

#### 4. **文件验证失败**
```
错误：文件中只找到2个有效激活码，建议至少5个
解决：检查文件内容，确保有足够的有效激活码
```

### **调试方法**
1. **查看状态栏** - 显示操作结果和错误信息
2. **重新选择文件** - 如果路径有问题，重新上传
3. **检查文件内容** - 确保格式正确

## 💡 使用技巧

### **文件管理建议**
1. **分类存储** - 不同类型激活码放在不同文件夹
2. **命名规范** - 使用清晰的文件名（如`30天激活码_2024.txt`）
3. **备份重要文件** - 防止意外丢失
4. **定期更新** - 激活码用完后及时更新文件

### **批量管理**
- 可以为不同类型分别设置文件
- 支持随时更换激活码源文件
- 文件路径自动保存，重启应用后仍然有效

## 📋 示例文件

### **30天激活码示例文件**
```
# 30天激活码文件
# 生成时间：2024-01-01
# 总数：25个

ABC123DEF4
XYZ789GHI0
JKL456MNO1
PQR789STU2
VWX012YZA3
...
```

通过这个功能，用户可以完全自定义激活码管理，不再受限于预设文件，大大提高了应用的灵活性和实用性！
